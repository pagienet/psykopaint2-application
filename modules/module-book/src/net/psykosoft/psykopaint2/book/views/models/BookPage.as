package net.psykosoft.psykopaint2.book.views.models
{
	import away3d.containers.ObjectContainer3D;
	import away3d.entities.Mesh;
	import away3d.core.base.Geometry;
	import away3d.materials.TextureMaterial;
	import away3d.materials.MaterialBase;
	import away3d.core.base.Geometry;
	import away3d.core.base.SubGeometry;

	import flash.geom.Matrix3D;

	public class BookPage extends ObjectContainer3D
	{
		private var _recto:Mesh;
		private var _verso:Mesh;
		private var _sharedGeom:Boolean;

		function BookPage(materialRecto:TextureMaterial, materialVerso:TextureMaterial, usedBookPage:BookPage = null):void
		{
			super();
			//todo: share geoms
			//if(usedBookPage){
			//	_sharedGeom = true;
			//	_verso = new Mesh(usedBookPage.verso.geometry, materialVerso);
			//	_recto = new Mesh(usedBookPage.recto.geometry.clone(), materialRecto);
			//} else {
				generate(materialRecto, materialVerso);
			//}
		}

		public function disposeContent():void
		{
			_recto.material = null;
			_verso.material = null;
			
			if(!_sharedGeom){
				_recto.geometry.dispose();
				_verso.geometry.dispose();
			}
			 
			_recto = null;
			_verso = null;
		}

		public function get recto():Mesh
		{
			return _recto;
		}
		public function get verso():Mesh
		{
			return _verso;
		}

		private function generate(materialRecto:TextureMaterial, materialVerso:TextureMaterial):void
		{
			var verso_rd:Vector.<Number> = Vector.<Number>([1,0,0,0,0,1,0,0,0,0,1,0,0.05697299912571907,20,0,1]);
			_verso = buildMesh(new Geometry(), verso_rd, "verso", materialVerso);

			var verso_data:Array =
			[Vector.<uint>([0,1,2,2,3,4,5,4,3,3,6,5,7,5,6,6,8,7,9,7,8,8,10,9,11,9,10,10,12,11,13,11,12,12,14,13,15,13,14,14,16,15,17,15,16,16,18,17,19,17,18,18,20,19,21,19,20,20,22,21,23,21,22,22,24,23,25,23,24,24,26,25,27,25,26,26,28,27,29,27,28,28,30,29,31,29,30,30,32,31,33,31,32,32,34,33,35,33,34,34,36,35,37,35,36,36,38,37,39,37,38,38,40,39,41,39,40,40,42,41,3,2,43,43,44,3,6,3,44,44,45,6,8,6,45,45,46,8,10,8,46,46,47,10,12,10,47,47,48,12,14,12,48,48,49,14,16,14,49,49,50,16,18,16,50,50,51,18,20,18,51,51,52,20,22,20,52,52,53,22,24,22,53,53,54,24,26,24,54,54,55,26,28,26,55,55,56,28,30,28,56,56,57,30,32,30,57,57,58,32,34,32,58,58,59,34,36,34,59,59,60,36,38,36,60,60,61,38,40,38,61,61,62,40,42,40,62,62,63,42,44,43,64,64,65,44,45,44,65,65,66,45,46,45,66,66,67,46,47,46,67,67,68,47,48,47,68,68,69,48,49,48,69,69,70,49,50,49,70,70,71,50,51,50,71,71,72,51,52,51,72,72,73,52,53,52,73,73,74,53,54,53,74,74,75,54,55,54,75,75,76,55,56,55,76,76,77,56,57,56,77,77,78,57,58,57,78,78,79,58,59,58,79,79,80,59,60,59,80,80,81,60,61,60,81,81,82,61,62,61,82,82,83,62,63,62,83,83,84,63,65,64,85,85,86,65,66,65,86,86,87,66,67,66,87,87,88,67,68,67,88,88,89,68,69,68,89,89,90,69,70,69,90,90,91,70,71,70,91,91,92,71,72,71,92,92,93,72,73,72,93,93,94,73,74,73,94,94,95,74,75,74,95,95,96,75,76,75,96,96,97,76,77,76,97,97,98,77,78,77,98,98,99,78,79,78,99,99,100,79,80,79,100,100,101,80,81,80,101,101,102,81,82,81,102,102,103,82,83,82,103,103,104,83,84,83,104,104,105,84,86,85,106,106,107,86,87,86,107,107,108,87,88,87,108,108,109,88,89,88,109,109,110,89,90,89,110,110,111,90,91,90,111,111,112,91,92,91,112,112,113,92,93,92,113,113,114,93,94,93,114,114,115,94,95,94,115,115,116,95,96,95,116,116,117,96,97,96,117,117,118,97,98,97,118,118,119,98,99,98,119,119,120,99,100,99,120,120,121,100,101,100,121,121,122,101,102,101,122,122,123,102,103,102,123,123,124,103,104,103,124,124,125,104,105,104,125,125,126,105,107,106,127,127,128,107,108,107,128,128,129,108,109,108,129,129,130,109,110,109,130,130,131,110,111,110,131,131,132,111,112,111,132,132,133,112,113,112,133,133,134,113,114,113,134,134,135,114,115,114,135,135,136,115,116,115,136,136,137,116,117,116,137,137,138,117,118,117,138,138,139,118,119,118,139,139,140,119,120,119,140,140,141,120,121,120,141,141,142,121,122,121,142,142,143,122,123,122,143,143,144,123,124,123,144,144,145,124,125,124,145,145,146,125,126,125,146,146,147,126,128,127,148,148,149,128,129,128,149,149,150,129,130,129,150,150,151,130,131,130,151,151,152,131,132,131,152,152,153,132,133,132,153,153,154,133,134,133,154,154,155,134,135,134,155,155,156,135,136,135,156,156,157,136,137,136,157,157,158,137,138,137,158,158,159,138,139,138,159,159,160,139,140,139,160,160,161,140,141,140,161,161,162,141,142,141,162,162,163,142,143,142,163,163,164,143,144,143,164,164,165,144,145,144,165,165,166,145,146,145,166,166,167,146,147,146,167,167,168,147,149,148,169,169,170,149,150,149,170,170,171,150,151,150,171,171,172,151,152,151,172,172,173,152,153,152,173,173,174,153,154,153,174,174,175,154,155,154,175,175,176,155,156,155,176,176,177,156,157,156,177,177,178,157,158,157,178,178,179,158,159,158,179,179,180,159,160,159,180,180,181,160,161,160,181,181,182,161,162,161,182,182,183,162,163,162,183,183,184,163,164,163,184,184,185,164,165,164,185,185,186,165,166,165,186,186,187,166,167,166,187,187,188,167,168,167,188,188,189,168,170,169,190,190,191,170,171,170,191,191,192,171,172,171,192,192,193,172,173,172,193,193,194,173,174,173,194,194,195,174,175,174,195,195,196,175,176,175,196,196,197,176,177,176,197,197,198,177,178,177,198,198,199,178,179,178,199,199,200,179,180,179,200,200,201,180,181,180,201,201,202,181,182,181,202,202,203,182,183,182,203,203,204,183,184,183,204,204,205,184,185,184,205,205,206,185,186,185,206,206,207,186,187,186,207,207,208,187,188,187,208,208,209,188,189,188,209,209,210,189,191,190,211,211,212,191,192,191,212,212,213,192,193,192,213,213,214,193,194,193,214,214,215,194,195,194,215,215,216,195,196,195,216,216,217,196,197,196,217,217,218,197,198,197,218,218,219,198,199,198,219,219,220,199,200,199,220,220,221,200,201,200,221,221,222,201,202,201,222,222,223,202,203,202,223,223,224,203,204,203,224,224,225,204,205,204,225,225,226,205,206,205,226,226,227,206,207,206,227,227,228,207,208,207,228,228,229,208,209,208,229,229,230,209,210,209,230,230,231,210]),
			Vector.<Number>([-49.109,0,-488.267,0,0,-488.267,0,0,-390.615,-49.109,0,-390.615,-49.109,0,-488.267,-98.0984,0,-488.267,-98.0984,0,-390.615,-147.207,0,-488.267,-147.207,0,-390.615,-196.197,0,-488.267,-196.197,0,-390.615,-245.306,0,-488.267,-245.306,0,-390.615,-294.415,0,-488.267,-294.415,0,-390.615,-343.404,0,-488.267,-343.404,0,-390.615,-392.513,0,-488.267,-392.513,0,-390.615,-441.502,0,-488.267,-441.502,0,-390.615,-490.611,0,-488.267,-490.611,0,-390.615,-539.72,0,-488.267,-539.72,0,-390.615,-588.71,0,-488.267,-588.71,0,-390.615,-637.819,0,-488.267,-637.819,0,-390.615,-686.808,0,-488.267,-686.808,0,-390.615,-735.917,0,-488.267,-735.917,0,-390.615,-785.026,0,-488.267,-785.026,0,-390.615,-834.015,0,-488.267,-834.015,0,-390.615,-883.124,0,-488.267,-883.124,0,-390.615,-932.114,0,-488.267,-932.114,0,-390.615,-981.223,0,-488.267,-981.223,0,-390.615,0,0,-292.959,-49.109,0,-292.959,-98.0984,0,-292.959,-147.207,0,-292.959,-196.197,0,-292.959,-245.306,0,-292.959,-294.415,0,-292.959,-343.404,0,-292.959,-392.513,0,-292.959,-441.502,0,-292.959,-490.611,0,-292.959,-539.72,0,-292.959,-588.71,0,-292.959,-637.819,0,-292.959,-686.808,0,-292.959,-735.917,0,-292.959,-785.026,0,-292.959,-834.015,0,-292.959,-883.124,0,-292.959,-932.114,0,-292.959,-981.223,0,-292.959,0,0,-195.307,-49.109,0,-195.307,-98.0984,0,-195.307,-147.207,0,-195.307,-196.197,0,-195.307,-245.306,0,-195.307,-294.415,0,-195.307,-343.404,0,-195.307,-392.513,0,-195.307,-441.502,0,-195.307,-490.611,0,-195.307,-539.72,0,-195.307,-588.71,0,-195.307,-637.819,0,-195.307,-686.808,0,-195.307,-735.917,0,-195.307,-785.026,0,-195.307,-834.015,0,-195.307,-883.124,0,-195.307,-932.114,0,-195.307,-981.223,0,-195.307,0,0,-97.6518,-49.109,0,-97.6518,-98.0984,0,-97.6518,-147.207,0,-97.6518,-196.197,0,-97.6518,-245.306,0,-97.6518,-294.415,0,-97.6518,-343.404,0,-97.6518,-392.513,0,-97.6518,-441.502,0,-97.6518,-490.611,0,-97.6518,-539.72,0,-97.6518,-588.71,0,-97.6518,-637.819,0,-97.6518,-686.808,0,-97.6518,-735.917,0,-97.6518,-785.026,0,-97.6518,-834.015,0,-97.6518,-883.124,0,-97.6518,-932.114,0,-97.6518,-981.223,0,-97.6518,0,0,0.0000305176,-49.109,0,0.0000305176,-98.0984,0,0.0000305176,-147.207,0,0.0000305176,-196.197,0,0.0000305176,-245.306,0,0.0000305176,-294.415,0,0.0000305176,-343.404,0,0.0000305176,-392.513,0,0.0000305176,-441.502,0,0.0000305176,-490.611,0,0.0000305176,-539.72,0,0.0000305176,-588.71,0,0.0000305176,-637.819,0,0.0000305176,-686.808,0,0.0000305176,-735.917,0,0.0000305176,-785.026,0,0.0000305176,-834.015,0,0.0000305176,-883.124,0,0.0000305176,-932.114,0,0.0000305176,-981.223,0,0.0000305176,0,0,97.6519,-49.109,0,97.6519,-98.0984,0,97.6519,-147.207,0,97.6519,-196.197,0,97.6519,-245.306,0,97.6519,-294.415,0,97.6519,-343.404,0,97.6519,-392.513,0,97.6519,-441.502,0,97.6519,-490.611,0,97.6519,-539.72,0,97.6519,-588.71,0,97.6519,-637.819,0,97.6519,-686.808,0,97.6519,-735.917,0,97.6519,-785.026,0,97.6519,-834.015,0,97.6519,-883.124,0,97.6519,-932.114,0,97.6519,-981.223,0,97.6519,0,0,195.307,-49.109,0,195.307,-98.0984,0,195.307,-147.207,0,195.307,-196.197,0,195.307,-245.306,0,195.307,-294.415,0,195.307,-343.404,0,195.307,-392.513,0,195.307,-441.502,0,195.307,-490.611,0,195.307,-539.72,0,195.307,-588.71,0,195.307,-637.819,0,195.307,-686.808,0,195.307,-735.917,0,195.307,-785.026,0,195.307,-834.015,0,195.307,-883.124,0,195.307,-932.114,0,195.307,-981.223,0,195.307,0,0,292.959,-49.109,0,292.959,-98.0984,0,292.959,-147.207,0,292.959,-196.197,0,292.959,-245.306,0,292.959,-294.415,0,292.959,-343.404,0,292.959,-392.513,0,292.959,-441.502,0,292.959,-490.611,0,292.959,-539.72,0,292.959,-588.71,0,292.959,-637.819,0,292.959,-686.808,0,292.959,-735.917,0,292.959,-785.026,0,292.959,-834.015,0,292.959,-883.124,0,292.959,-932.114,0,292.959,-981.223,0,292.959,0,0,390.615,-49.109,0,390.615,-98.0984,0,390.615,-147.207,0,390.615,-196.197,0,390.615,-245.306,0,390.615,-294.415,0,390.615,-343.404,0,390.615,-392.513,0,390.615,-441.502,0,390.615,-490.611,0,390.615,-539.72,0,390.615,-588.71,0,390.615,-637.819,0,390.615,-686.808,0,390.615,-735.917,0,390.615,-785.026,0,390.615,-834.015,0,390.615,-883.124,0,390.615,-932.114,0,390.615,-981.223,0,390.615,0,0,488.267,-49.109,0,488.267,-98.0984,0,488.267,-147.207,0,488.267,-196.197,0,488.267,-245.306,0,488.267,-294.415,0,488.267,-343.404,0,488.267,-392.513,0,488.267,-441.502,0,488.267,-490.611,0,488.267,-539.72,0,488.267,-588.71,0,488.267,-637.819,0,488.267,-686.808,0,488.267,-735.917,0,488.267,-785.026,0,488.267,-834.015,0,488.267,-883.124,0,488.267,-932.114,0,488.267,-981.223,0,488.267]),
			Vector.<Number>([0.949951,0,1,0,1,0.09952099999999997,0.949951,0.09952099999999997,0.949951,0,0.900024,0,0.900024,0.09952099999999997,0.849976,0,0.849976,0.09952099999999997,0.800049,0,0.800049,0.09952099999999997,0.75,0,0.75,0.09952099999999997,0.699951,0,0.699951,0.09952099999999997,0.650024,0,0.650024,0.09952099999999997,0.599976,0,0.599976,0.09952099999999997,0.550049,0,0.550049,0.09952099999999997,0.5,0,0.5,0.09952099999999997,0.449951,0,0.449951,0.09952099999999997,0.400024,0,0.400024,0.09952099999999997,0.349975,0,0.349975,0.09952099999999997,0.300049,0,0.300049,0.09952099999999997,0.25,0,0.25,0.09952099999999997,0.199951,0,0.199951,0.09952099999999997,0.150024,0,0.150024,0.09952099999999997,0.099976,0,0.099976,0.09952099999999997,0.050049,0,0.050049,0.09952099999999997,0,0,0,0.09952099999999997,1,0.19904500000000003,0.949951,0.19904500000000003,0.900024,0.19904500000000003,0.849976,0.19904500000000003,0.800049,0.19904500000000003,0.75,0.19904500000000003,0.699951,0.19904500000000003,0.650024,0.19904500000000003,0.599976,0.19904500000000003,0.550049,0.19904500000000003,0.5,0.19904500000000003,0.449951,0.19904500000000003,0.400024,0.19904500000000003,0.349975,0.19904500000000003,0.300049,0.19904500000000003,0.25,0.19904500000000003,0.199951,0.19904500000000003,0.150024,0.19904500000000003,0.099976,0.19904500000000003,0.050049,0.19904500000000003,0,0.19904500000000003,1,0.298566,0.949951,0.298566,0.900024,0.298566,0.849976,0.298566,0.800049,0.298566,0.75,0.298566,0.699951,0.298566,0.650024,0.298566,0.599976,0.298566,0.550049,0.298566,0.5,0.298566,0.449951,0.298566,0.400024,0.298566,0.349975,0.298566,0.300049,0.298566,0.25,0.298566,0.199951,0.298566,0.150024,0.298566,0.099976,0.298566,0.050049,0.298566,0,0.298566,1,0.39809000000000005,0.949951,0.39809000000000005,0.900024,0.39809000000000005,0.849976,0.39809000000000005,0.800049,0.39809000000000005,0.75,0.39809000000000005,0.699951,0.39809000000000005,0.650024,0.39809000000000005,0.599976,0.39809000000000005,0.550049,0.39809000000000005,0.5,0.39809000000000005,0.449951,0.39809000000000005,0.400024,0.39809000000000005,0.349975,0.39809000000000005,0.300049,0.39809000000000005,0.25,0.39809000000000005,0.199951,0.39809000000000005,0.150024,0.39809000000000005,0.099976,0.39809000000000005,0.050049,0.39809000000000005,0,0.39809000000000005,1,0.497611,0.949951,0.497611,0.900024,0.497611,0.849976,0.497611,0.800049,0.497611,0.75,0.497611,0.699951,0.497611,0.650024,0.497611,0.599976,0.497611,0.550049,0.497611,0.5,0.497611,0.449951,0.497611,0.400024,0.497611,0.349975,0.497611,0.300049,0.497611,0.25,0.497611,0.199951,0.497611,0.150024,0.497611,0.099976,0.497611,0.050049,0.497611,0,0.497611,1,0.5971310000000001,0.949951,0.5971310000000001,0.900024,0.5971310000000001,0.849976,0.5971310000000001,0.800049,0.5971310000000001,0.75,0.5971310000000001,0.699951,0.5971310000000001,0.650024,0.5971310000000001,0.599976,0.5971310000000001,0.550049,0.5971310000000001,0.5,0.5971310000000001,0.449951,0.5971310000000001,0.400024,0.5971310000000001,0.349975,0.5971310000000001,0.300049,0.5971310000000001,0.25,0.5971310000000001,0.199951,0.5971310000000001,0.150024,0.5971310000000001,0.099976,0.5971310000000001,0.050049,0.5971310000000001,0,0.5971310000000001,1,0.696655,0.949951,0.696655,0.900024,0.696655,0.849976,0.696655,0.800049,0.696655,0.75,0.696655,0.699951,0.696655,0.650024,0.696655,0.599976,0.696655,0.550049,0.696655,0.5,0.696655,0.449951,0.696655,0.400024,0.696655,0.349975,0.696655,0.300049,0.696655,0.25,0.696655,0.199951,0.696655,0.150024,0.696655,0.099976,0.696655,0.050049,0.696655,0,0.696655,1,0.796176,0.949951,0.796176,0.900024,0.796176,0.849976,0.796176,0.800049,0.796176,0.75,0.796176,0.699951,0.796176,0.650024,0.796176,0.599976,0.796176,0.550049,0.796176,0.5,0.796176,0.449951,0.796176,0.400024,0.796176,0.349975,0.796176,0.300049,0.796176,0.25,0.796176,0.199951,0.796176,0.150024,0.796176,0.099976,0.796176,0.050049,0.796176,0,0.796176,1,0.8956999999999999,0.949951,0.8956999999999999,0.900024,0.8956999999999999,0.849976,0.8956999999999999,0.800049,0.8956999999999999,0.75,0.8956999999999999,0.699951,0.8956999999999999,0.650024,0.8956999999999999,0.599976,0.8956999999999999,0.550049,0.8956999999999999,0.5,0.8956999999999999,0.449951,0.8956999999999999,0.400024,0.8956999999999999,0.349975,0.8956999999999999,0.300049,0.8956999999999999,0.25,0.8956999999999999,0.199951,0.8956999999999999,0.150024,0.8956999999999999,0.099976,0.8956999999999999,0.050049,0.8956999999999999,0,0.8956999999999999,1,0.99522096,0.949951,0.99522096,0.900024,0.99522096,0.849976,0.99522096,0.800049,0.99522096,0.75,0.99522096,0.699951,0.99522096,0.650024,0.99522096,0.599976,0.99522096,0.550049,0.99522096,0.5,0.99522096,0.449951,0.99522096,0.400024,0.99522096,0.349975,0.99522096,0.300049,0.99522096,0.25,0.99522096,0.199951,0.99522096,0.150024,0.99522096,0.099976,0.99522096,0.050049,0.99522096,0,0.99522096]),
			null,
			null];
			fillData(verso, verso_data);

			var recto_rd:Vector.<Number> = Vector.<Number>([1,0,0,0,0,1,0,0,0,0,1,0,0.05697299912571907,20,0,1]);
			_recto = buildMesh(new Geometry(), recto_rd, "recto", materialRecto);

			var recto_data:Array =
			[Vector.<uint>([0,1,2,1,3,4,5,4,3,4,5,6,7,6,5,6,7,8,9,8,7,8,9,10,11,10,9,10,11,12,13,12,11,12,13,14,15,14,13,14,15,16,17,16,15,16,17,18,19,18,17,18,19,20,21,20,19,20,21,22,23,22,21,22,23,24,25,24,23,24,25,26,27,26,25,26,27,28,29,28,27,28,29,30,31,30,29,30,31,32,33,32,31,32,33,34,35,34,33,34,35,36,37,36,35,36,37,38,39,38,37,38,39,40,41,40,39,40,41,42,4,43,1,43,4,44,6,44,4,44,6,45,8,45,6,45,8,46,10,46,8,46,10,47,12,47,10,47,12,48,14,48,12,48,14,49,16,49,14,49,16,50,18,50,16,50,18,51,20,51,18,51,20,52,22,52,20,52,22,53,24,53,22,53,24,54,26,54,24,54,26,55,28,55,26,55,28,56,30,56,28,56,30,57,32,57,30,57,32,58,34,58,32,58,34,59,36,59,34,59,36,60,38,60,36,60,38,61,40,61,38,61,40,62,42,62,40,62,42,63,44,64,43,64,44,65,45,65,44,65,45,66,46,66,45,66,46,67,47,67,46,67,47,68,48,68,47,68,48,69,49,69,48,69,49,70,50,70,49,70,50,71,51,71,50,71,51,72,52,72,51,72,52,73,53,73,52,73,53,74,54,74,53,74,54,75,55,75,54,75,55,76,56,76,55,76,56,77,57,77,56,77,57,78,58,78,57,78,58,79,59,79,58,79,59,80,60,80,59,80,60,81,61,81,60,81,61,82,62,82,61,82,62,83,63,83,62,83,63,84,65,85,64,85,65,86,66,86,65,86,66,87,67,87,66,87,67,88,68,88,67,88,68,89,69,89,68,89,69,90,70,90,69,90,70,91,71,91,70,91,71,92,72,92,71,92,72,93,73,93,72,93,73,94,74,94,73,94,74,95,75,95,74,95,75,96,76,96,75,96,76,97,77,97,76,97,77,98,78,98,77,98,78,99,79,99,78,99,79,100,80,100,79,100,80,101,81,101,80,101,81,102,82,102,81,102,82,103,83,103,82,103,83,104,84,104,83,104,84,105,86,106,85,106,86,107,87,107,86,107,87,108,88,108,87,108,88,109,89,109,88,109,89,110,90,110,89,110,90,111,91,111,90,111,91,112,92,112,91,112,92,113,93,113,92,113,93,114,94,114,93,114,94,115,95,115,94,115,95,116,96,116,95,116,96,117,97,117,96,117,97,118,98,118,97,118,98,119,99,119,98,119,99,120,100,120,99,120,100,121,101,121,100,121,101,122,102,122,101,122,102,123,103,123,102,123,103,124,104,124,103,124,104,125,105,125,104,125,105,126,107,127,106,127,107,128,108,128,107,128,108,129,109,129,108,129,109,130,110,130,109,130,110,131,111,131,110,131,111,132,112,132,111,132,112,133,113,133,112,133,113,134,114,134,113,134,114,135,115,135,114,135,115,136,116,136,115,136,116,137,117,137,116,137,117,138,118,138,117,138,118,139,119,139,118,139,119,140,120,140,119,140,120,141,121,141,120,141,121,142,122,142,121,142,122,143,123,143,122,143,123,144,124,144,123,144,124,145,125,145,124,145,125,146,126,146,125,146,126,147,128,148,127,148,128,149,129,149,128,149,129,150,130,150,129,150,130,151,131,151,130,151,131,152,132,152,131,152,132,153,133,153,132,153,133,154,134,154,133,154,134,155,135,155,134,155,135,156,136,156,135,156,136,157,137,157,136,157,137,158,138,158,137,158,138,159,139,159,138,159,139,160,140,160,139,160,140,161,141,161,140,161,141,162,142,162,141,162,142,163,143,163,142,163,143,164,144,164,143,164,144,165,145,165,144,165,145,166,146,166,145,166,146,167,147,167,146,167,147,168,149,169,148,169,149,170,150,170,149,170,150,171,151,171,150,171,151,172,152,172,151,172,152,173,153,173,152,173,153,174,154,174,153,174,154,175,155,175,154,175,155,176,156,176,155,176,156,177,157,177,156,177,157,178,158,178,157,178,158,179,159,179,158,179,159,180,160,180,159,180,160,181,161,181,160,181,161,182,162,182,161,182,162,183,163,183,162,183,163,184,164,184,163,184,164,185,165,185,164,185,165,186,166,186,165,186,166,187,167,187,166,187,167,188,168,188,167,188,168,189,170,190,169,190,170,191,171,191,170,191,171,192,172,192,171,192,172,193,173,193,172,193,173,194,174,194,173,194,174,195,175,195,174,195,175,196,176,196,175,196,176,197,177,197,176,197,177,198,178,198,177,198,178,199,179,199,178,199,179,200,180,200,179,200,180,201,181,201,180,201,181,202,182,202,181,202,182,203,183,203,182,203,183,204,184,204,183,204,184,205,185,205,184,205,185,206,186,206,185,206,186,207,187,207,186,207,187,208,188,208,187,208,188,209,189,209,188,209,189,210,191,211,190,211,191,212,192,212,191,212,192,213,193,213,192,213,193,214,194,214,193,214,194,215,195,215,194,215,195,216,196,216,195,216,196,217,197,217,196,217,197,218,198,218,197,218,198,219,199,219,198,219,199,220,200,220,199,220,200,221,201,221,200,221,201,222,202,222,201,222,202,223,203,223,202,223,203,224,204,224,203,224,204,225,205,225,204,225,205,226,206,226,205,226,206,227,207,227,206,227,207,228,208,228,207,228,208,229,209,229,208,229,209,230,210,230,209,230,210,231]),
			Vector.<Number>([-932.114,0,488.267,-981.223,0,390.615,-981.223,0,488.267,-932.114,0,488.267,-932.114,0,390.615,-883.124,0,488.267,-883.124,0,390.615,-834.015,0,488.267,-834.015,0,390.615,-785.026,0,488.267,-785.026,0,390.615,-735.917,0,488.267,-735.917,0,390.615,-686.808,0,488.267,-686.808,0,390.615,-637.819,0,488.267,-637.819,0,390.615,-588.71,0,488.267,-588.71,0,390.615,-539.72,0,488.267,-539.72,0,390.615,-490.611,0,488.267,-490.611,0,390.615,-441.502,0,488.267,-441.502,0,390.615,-392.513,0,488.267,-392.513,0,390.615,-343.404,0,488.267,-343.404,0,390.615,-294.415,0,488.267,-294.415,0,390.615,-245.306,0,488.267,-245.306,0,390.615,-196.197,0,488.267,-196.197,0,390.615,-147.207,0,488.267,-147.207,0,390.615,-98.0984,0,488.267,-98.0984,0,390.615,-49.109,0,488.267,-49.109,0,390.615,0,0,488.267,0,0,390.615,-981.223,0,292.959,-932.114,0,292.959,-883.124,0,292.959,-834.015,0,292.959,-785.026,0,292.959,-735.917,0,292.959,-686.808,0,292.959,-637.819,0,292.959,-588.71,0,292.959,-539.72,0,292.959,-490.611,0,292.959,-441.502,0,292.959,-392.513,0,292.959,-343.404,0,292.959,-294.415,0,292.959,-245.306,0,292.959,-196.197,0,292.959,-147.207,0,292.959,-98.0984,0,292.959,-49.109,0,292.959,0,0,292.959,-981.223,0,195.307,-932.114,0,195.307,-883.124,0,195.307,-834.015,0,195.307,-785.026,0,195.307,-735.917,0,195.307,-686.808,0,195.307,-637.819,0,195.307,-588.71,0,195.307,-539.72,0,195.307,-490.611,0,195.307,-441.502,0,195.307,-392.513,0,195.307,-343.404,0,195.307,-294.415,0,195.307,-245.306,0,195.307,-196.197,0,195.307,-147.207,0,195.307,-98.0984,0,195.307,-49.109,0,195.307,0,0,195.307,-981.223,0,97.6519,-932.114,0,97.6519,-883.124,0,97.6519,-834.015,0,97.6519,-785.026,0,97.6519,-735.917,0,97.6519,-686.808,0,97.6519,-637.819,0,97.6519,-588.71,0,97.6519,-539.72,0,97.6519,-490.611,0,97.6519,-441.502,0,97.6519,-392.513,0,97.6519,-343.404,0,97.6519,-294.415,0,97.6519,-245.306,0,97.6519,-196.197,0,97.6519,-147.207,0,97.6519,-98.0984,0,97.6519,-49.109,0,97.6519,0,0,97.6519,-981.223,0,0.0000305176,-932.114,0,0.0000305176,-883.124,0,0.0000305176,-834.015,0,0.0000305176,-785.026,0,0.0000305176,-735.917,0,0.0000305176,-686.808,0,0.0000305176,-637.819,0,0.0000305176,-588.71,0,0.0000305176,-539.72,0,0.0000305176,-490.611,0,0.0000305176,-441.502,0,0.0000305176,-392.513,0,0.0000305176,-343.404,0,0.0000305176,-294.415,0,0.0000305176,-245.306,0,0.0000305176,-196.197,0,0.0000305176,-147.207,0,0.0000305176,-98.0984,0,0.0000305176,-49.109,0,0.0000305176,0,0,0.0000305176,-981.223,0,-97.6518,-932.114,0,-97.6518,-883.124,0,-97.6518,-834.015,0,-97.6518,-785.026,0,-97.6518,-735.917,0,-97.6518,-686.808,0,-97.6518,-637.819,0,-97.6518,-588.71,0,-97.6518,-539.72,0,-97.6518,-490.611,0,-97.6518,-441.502,0,-97.6518,-392.513,0,-97.6518,-343.404,0,-97.6518,-294.415,0,-97.6518,-245.306,0,-97.6518,-196.197,0,-97.6518,-147.207,0,-97.6518,-98.0984,0,-97.6518,-49.109,0,-97.6518,0,0,-97.6518,-981.223,0,-195.307,-932.114,0,-195.307,-883.124,0,-195.307,-834.015,0,-195.307,-785.026,0,-195.307,-735.917,0,-195.307,-686.808,0,-195.307,-637.819,0,-195.307,-588.71,0,-195.307,-539.72,0,-195.307,-490.611,0,-195.307,-441.502,0,-195.307,-392.513,0,-195.307,-343.404,0,-195.307,-294.415,0,-195.307,-245.306,0,-195.307,-196.197,0,-195.307,-147.207,0,-195.307,-98.0984,0,-195.307,-49.109,0,-195.307,0,0,-195.307,-981.223,0,-292.959,-932.114,0,-292.959,-883.124,0,-292.959,-834.015,0,-292.959,-785.026,0,-292.959,-735.917,0,-292.959,-686.808,0,-292.959,-637.819,0,-292.959,-588.71,0,-292.959,-539.72,0,-292.959,-490.611,0,-292.959,-441.502,0,-292.959,-392.513,0,-292.959,-343.404,0,-292.959,-294.415,0,-292.959,-245.306,0,-292.959,-196.197,0,-292.959,-147.207,0,-292.959,-98.0984,0,-292.959,-49.109,0,-292.959,0,0,-292.959,-981.223,0,-390.615,-932.114,0,-390.615,-883.124,0,-390.615,-834.015,0,-390.615,-785.026,0,-390.615,-735.917,0,-390.615,-686.808,0,-390.615,-637.819,0,-390.615,-588.71,0,-390.615,-539.72,0,-390.615,-490.611,0,-390.615,-441.502,0,-390.615,-392.513,0,-390.615,-343.404,0,-390.615,-294.415,0,-390.615,-245.306,0,-390.615,-196.197,0,-390.615,-147.207,0,-390.615,-98.0984,0,-390.615,-49.109,0,-390.615,0,0,-390.615,-981.223,0,-488.267,-932.114,0,-488.267,-883.124,0,-488.267,-834.015,0,-488.267,-785.026,0,-488.267,-735.917,0,-488.267,-686.808,0,-488.267,-637.819,0,-488.267,-588.71,0,-488.267,-539.72,0,-488.267,-490.611,0,-488.267,-441.502,0,-488.267,-392.513,0,-488.267,-343.404,0,-488.267,-294.415,0,-488.267,-245.306,0,-488.267,-196.197,0,-488.267,-147.207,0,-488.267,-98.0984,0,-488.267,-49.109,0,-488.267,0,0,-488.267]),
			Vector.<Number>([0.949951,0.99522096,1,0.8956999999999999,1,0.99522096,0.949951,0.99522096,0.949951,0.8956999999999999,0.900024,0.99522096,0.900024,0.8956999999999999,0.849976,0.99522096,0.849976,0.8956999999999999,0.800049,0.99522096,0.800049,0.8956999999999999,0.75,0.99522096,0.75,0.8956999999999999,0.699951,0.99522096,0.699951,0.8956999999999999,0.650025,0.99522096,0.650025,0.8956999999999999,0.599976,0.99522096,0.599976,0.8956999999999999,0.550049,0.99522096,0.550049,0.8956999999999999,0.5,0.99522096,0.5,0.8956999999999999,0.449951,0.99522096,0.449951,0.8956999999999999,0.400024,0.99522096,0.400024,0.8956999999999999,0.349976,0.99522096,0.349976,0.8956999999999999,0.300049,0.99522096,0.300049,0.8956999999999999,0.25,0.99522096,0.25,0.8956999999999999,0.199951,0.99522096,0.199951,0.8956999999999999,0.150024,0.99522096,0.150024,0.8956999999999999,0.0999756,0.99522096,0.0999756,0.8956999999999999,0.0500488,0.99522096,0.0500488,0.8956999999999999,0,0.99522096,0,0.8956999999999999,1,0.796176,0.949951,0.796176,0.900024,0.796176,0.849976,0.796176,0.800049,0.796176,0.75,0.796176,0.699951,0.796176,0.650025,0.796176,0.599976,0.796176,0.550049,0.796176,0.5,0.796176,0.449951,0.796176,0.400024,0.796176,0.349976,0.796176,0.300049,0.796176,0.25,0.796176,0.199951,0.796176,0.150024,0.796176,0.0999756,0.796176,0.0500488,0.796176,0,0.796176,1,0.696655,0.949951,0.696655,0.900024,0.696655,0.849976,0.696655,0.800049,0.696655,0.75,0.696655,0.699951,0.696655,0.650025,0.696655,0.599976,0.696655,0.550049,0.696655,0.5,0.696655,0.449951,0.696655,0.400024,0.696655,0.349976,0.696655,0.300049,0.696655,0.25,0.696655,0.199951,0.696655,0.150024,0.696655,0.0999756,0.696655,0.0500488,0.696655,0,0.696655,1,0.5971310000000001,0.949951,0.5971310000000001,0.900024,0.5971310000000001,0.849976,0.5971310000000001,0.800049,0.5971310000000001,0.75,0.5971310000000001,0.699951,0.5971310000000001,0.650025,0.5971310000000001,0.599976,0.5971310000000001,0.550049,0.5971310000000001,0.5,0.5971310000000001,0.449951,0.5971310000000001,0.400024,0.5971310000000001,0.349976,0.5971310000000001,0.300049,0.5971310000000001,0.25,0.5971310000000001,0.199951,0.5971310000000001,0.150024,0.5971310000000001,0.0999756,0.5971310000000001,0.0500488,0.5971310000000001,0,0.5971310000000001,1,0.497611,0.949951,0.497611,0.900024,0.497611,0.849976,0.497611,0.800049,0.497611,0.75,0.497611,0.699951,0.497611,0.650025,0.497611,0.599976,0.497611,0.550049,0.497611,0.5,0.497611,0.449951,0.497611,0.400024,0.497611,0.349976,0.497611,0.300049,0.497611,0.25,0.497611,0.199951,0.497611,0.150024,0.497611,0.0999756,0.497611,0.0500488,0.497611,0,0.497611,1,0.39809000000000005,0.949951,0.39809000000000005,0.900024,0.39809000000000005,0.849976,0.39809000000000005,0.800049,0.39809000000000005,0.75,0.39809000000000005,0.699951,0.39809000000000005,0.650025,0.39809000000000005,0.599976,0.39809000000000005,0.550049,0.39809000000000005,0.5,0.39809000000000005,0.449951,0.39809000000000005,0.400024,0.39809000000000005,0.349976,0.39809000000000005,0.300049,0.39809000000000005,0.25,0.39809000000000005,0.199951,0.39809000000000005,0.150024,0.39809000000000005,0.0999756,0.39809000000000005,0.0500488,0.39809000000000005,0,0.39809000000000005,1,0.298566,0.949951,0.298566,0.900024,0.298566,0.849976,0.298566,0.800049,0.298566,0.75,0.298566,0.699951,0.298566,0.650025,0.298566,0.599976,0.298566,0.550049,0.298566,0.5,0.298566,0.449951,0.298566,0.400024,0.298566,0.349976,0.298566,0.300049,0.298566,0.25,0.298566,0.199951,0.298566,0.150024,0.298566,0.0999756,0.298566,0.0500488,0.298566,0,0.298566,1,0.19904500000000003,0.949951,0.19904500000000003,0.900024,0.19904500000000003,0.849976,0.19904500000000003,0.800049,0.19904500000000003,0.75,0.19904500000000003,0.699951,0.19904500000000003,0.650025,0.19904500000000003,0.599976,0.19904500000000003,0.550049,0.19904500000000003,0.5,0.19904500000000003,0.449951,0.19904500000000003,0.400024,0.19904500000000003,0.349976,0.19904500000000003,0.300049,0.19904500000000003,0.25,0.19904500000000003,0.199951,0.19904500000000003,0.150024,0.19904500000000003,0.0999756,0.19904500000000003,0.0500488,0.19904500000000003,0,0.19904500000000003,1,0.09952099999999997,0.949951,0.09952099999999997,0.900024,0.09952099999999997,0.849976,0.09952099999999997,0.800049,0.09952099999999997,0.75,0.09952099999999997,0.699951,0.09952099999999997,0.650025,0.09952099999999997,0.599976,0.09952099999999997,0.550049,0.09952099999999997,0.5,0.09952099999999997,0.449951,0.09952099999999997,0.400024,0.09952099999999997,0.349976,0.09952099999999997,0.300049,0.09952099999999997,0.25,0.09952099999999997,0.199951,0.09952099999999997,0.150024,0.09952099999999997,0.0999756,0.09952099999999997,0.0500488,0.09952099999999997,0,0.09952099999999997,1,0,0.949951,0,0.900024,0,0.849976,0,0.800049,0,0.75,0,0.699951,0,0.650025,0,0.599976,0,0.550049,0,0.5,0,0.449951,0,0.400024,0,0.349976,0,0.300049,0,0.25,0,0.199951,0,0.150024,0,0.0999756,0,0.0500488,0,0,0]),
			null,
			null];
			fillData(recto, recto_data);
		}

		private function fillData(m:Mesh, mData:Array):void
		{
			for(var i:uint = 0;i<mData.length; i+=5)
				fillSubgeometry(m, mData[i], mData[i+1], mData[i+2], mData[i+3], mData[i+4]);
		}

		private function buildMesh(geometry:Geometry, rawData:Vector.<Number>, name:String, material:MaterialBase = null, parent:ObjectContainer3D = null):Mesh
		{
			var mesh:Mesh = new Mesh( geometry, material);
			var t:Matrix3D = new Matrix3D(rawData);
			mesh.transform = t;
			mesh.name = name;
			
			if(parent)
				parent.addChild(mesh);
			else
				addChild(mesh);

			return mesh;
		}

		private function fillSubgeometry(mesh:Mesh, indices:Vector.<uint>, vertices:Vector.<Number>, uvs:Vector.<Number>, normals:Vector.<Number> = null, materialID:String = ""):void
		{
			var subGeom:SubGeometry = new SubGeometry();
			subGeom.updateVertexData(vertices);
			subGeom.updateUVData(uvs);
			subGeom.updateIndexData(indices);
			if(normals){
				subGeom.updateVertexNormalData(normals);
			} else {
				subGeom.autoDeriveVertexNormals = true;
			}
			subGeom.autoDeriveVertexTangents = true;
			mesh.geometry.addSubGeometry(subGeom);
		}

	}
}